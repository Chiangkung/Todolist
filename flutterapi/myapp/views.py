from django.shortcuts import render
from django.http import JsonResponse

from rest_framework.response import Response
from rest_framework.decorators import api_view
from rest_framework import status
from .serializers import TodolistSerializer
from .models import Todolist

# GET Data
@api_view(['GET']) # คือ decorator มีความสามารถที่จะบอกได้ว่า api ของเราทำอะไรได้บ้าง get / post
def all_todolist(request):
    alltodolist = Todolist.objects.all() #ดึงข้อมูลจาก model todolist เทียบกับ SQL คือ "SELECT * from todolist"
    serializer = TodolistSerializer(alltodolist,many=True) # many=True คือบอกว่าข้อมูลที่จะส่งไปมีจำนวนมากกว่า 1
    return Response(serializer.data, status=status.HTTP_200_OK)

# POST Data (save data to database)
@api_view(['POST'])
def post_todolist(request):
    if request.method == 'POST':
        serializer = TodolistSerializer(data=request.data)
        if serializer.is_valid():
            serializer.save()
            return Response(serializer.data,status=status.HTTP_201_CREATED)
        return Response(serializer.errors,status=status.HTTP_404_NOT_FOUND)

@api_view(['PUT'])
def update_todolist(request,TID):
    # localhost:8000/api/update-todolist/TID
    todo = Todolist.objects.get(id=TID)

    if request.method == 'PUT':
        data = {}
        serializer = TodolistSerializer(todo,data=request.data)
        if serializer.is_valid():
            serializer.save()
            data['status'] = 'update'
            return Response(data=data, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_404_NOT_FOUND)

@api_view(['DELETE'])
def delete_todolist(request,TID):
    todo = Todolist.objects.get(id=TID)

    if request.method == 'DELETE':
        delete = todo.delete()
        data = {}
        if delete:
            data['status'] = 'delete'
            statuscode = status.HTTP_200_OK
        else:
            data['status'] = 'failed'
            statuscode = status.HTTP_400_BAD_REQUEST

        return Response(data=data, status=statuscode)




data = [
    {
        "title":"Pfizer Vaccine ...>>",
        "subtitle":"วัคซีนโควิดไฟเซอร์ (Pfizer) มีชื่อทางการว่า BNT162b2 เป็นวัคซีนป้องกันโรคโควิด 19 ชนิด mRNA ที่คิดค้นโดยบริษัทไฟเซอร์ (Pfizer) ร่วมกับบริษัทสัญชาติเยอรมันชื่อไอโบเอ็นเท็ค (BioNTech)",
        "image_url":"https://raw.githubusercontent.com/Chiangkung/BasicAPI/main/pfizer.jpg",
        "detail":"วัคซีนโควิด-19 ของไฟเซอร์-ไบออนเทค (อังกฤษ: Pfizer-BioNTech COVID-19 vaccine) หรือ โทซิแนเมแรน (อังกฤษ: Tozinameran เป็นชื่อระหว่างประเทศที่ไม่มีเจ้าของ คือ INN) หรือมีตราสินค้า โคเมอร์เนที (อังกฤษ: Comirnaty)[3] เป็นวัคซีนโควิด-19 ที่ใช้เทคโนโลยีเอ็มอาร์เอ็นเอ ใช้ฉีดให้แก่บุคคลอายุ 12 ปีหรือยิ่งกว่าในเขตปกครองบางที่และ 16 ปีหรือยิ่งกว่าในที่อื่น ๆ เพื่อสร้างภูมิต้านทานของร่างกายและป้องกันการติดไวรัสโควิด-19 (SARS-CoV-2) ซึ่งก่อโรคโควิด-19[3][13][16][17][18] บริษัทไบออนเทคในเยอรมนีเป็นผู้พัฒนาวัคซีนในเบื้องต้น แล้วต่อมาจึงร่วมมือกับบริษัทไฟเซอร์ในสหรัฐในด้านการทดลองทางคลินิก โลจิสติกส์ และการผลิตทั่วโลก[19][20] ในประเทศจีน ไบออนเทคร่วมมือกับบริษัทจีนคือโฟสันฟาร์มาซูทิคอล (Fosun Pharmaceutical) เพื่อพัฒนา วางตลาด และแจกจำหน่ายวัคซีน โดยวัคซีนเรียกในจีนว่า วัคซีนโควิด-19 ของโฟสัน-ไบออนเทค (อังกฤษ: Fosun-BioNTech COVID-19 vaccine)[21][22][23][24][25][26][27] \n\nวัคซีนใช้ฉีดเข้ากล้ามเนื้อ เป็นวัคซีนอาร์เอ็นเออันประกอบด้วยเอ็มอาร์เอ็นเอที่ดัดแปลงนิวคลีโอไซด์ (Nucleoside-modified messenger RNA หรือ modRNA) ให้เข้ารหัสโปรตีนหนาม (spike) ที่กลายพันธุ์ (mutated) ของไวรัสโควิด-19 (SARS-CoV-2) แล้วหุ้มด้วยอนุภาคนาโนที่เป็นลิพิด (lipid nanoparticle)[28] ในเบื้องต้น วัคซีนแนะนำให้ฉีดสองครั้งโดยห่างกัน 21 วัน[15][29][30][31] แต่ต่อมาได้ยืดออกไปเป็น 42 วันในสหรัฐ[15][32] และอาจยืดไปถึง 4 เดือนในแคนาดา[33][34] \n\nการทดลองทางคลินิกได้เริ่มตั้งแต่เดือนเมษายน 2020[29] เมื่อถึงเดือนพฤศจิกายน 2020 การทดลองก็ได้ดำเนินไปถึงระยะที่ 3 โดยมีอาสาสมัครเกิน 40,000 คน[35] การวิเคราะห์ผลการทดลองในระหว่าง (interim analysis) แสดงว่า วัคซีนมีประสิทธิศักย์ (efficacy) ที่ร้อยละ 91.3 เพื่อป้องกันการติดโรคแบบแสดงอาการโดยภูมิเกิดภายใน 7 วันหลังได้โดสที่สอง[31][36] ผลข้างเคียงสามัญที่สุดก็คือเจ็บปวดเล็กน้อยจนถึงปานกลางที่จุดฉีด ล้า และปวดศีรษะ[37][38] จนถึงเดือนธันวาคม 2020 ก็มีรายงานผลข้างเคียงรุนแรง เช่น ปฏิกิริยาภูมิแพ้ น้อยมาก[A] และยังไม่มีรายงานผลข้างเคียงระยะยาว[3][40] ผลปฐมภูมิ (primary outcome) ต่าง ๆ ของวัคซีนจะเฝ้าติดตามไปจนถึงเดือนสิงหาคม 2021 และผลทุติยภูมิจนถึงเดือนมกราคม 2023[29] โดยจะประเมินการป้องกันสายพันธุ์ใหม่ ๆ ของไวรัสโควิด-19 ไปด้วย[29] \n\nวัคซีนนี้เป็นวัคซีนโควิด-19 แรกที่ได้รับอนุมัติจากองค์กรควบคุมที่องค์การอนามัยโลกจัดว่าเข้มงวดในการอนุมัติเวชภัณฑ์ เพื่อใช้เป็นการฉุกเฉิน[41][42] และใช้โดยทั่วไป[2] ในเดือนธันวาคม 2020 สหราชอาณาจักรเป็นประเทศแรกที่อนุมัติให้ใช้เป็นการฉุกเฉิน[40] แล้วก็ได้อนุมัติให้ใช้ในประเทศต่าง ๆ โดยมากในโลก"
    },
    {
        "title":"AstraZeneca Vaccine ...>>",
        "subtitle":"วัคซีนแอสตร้าเซนเนก้า (AstraZeneca) เป็นวัคซีนโควิดที่คิดค้นโดยบริษัทแอสตราเซเนกา (AstraZeneca) ร่วมกับมหาวิทยาลัยออกซ์ฟอร์ด (Oxford University) ",
        "image_url":"https://raw.githubusercontent.com/Chiangkung/BasicAPI/main/az.jpg",
        "detail":"วัคซีนโควิด-19 ของออกซฟอร์ด-แอสตร้าเซนเนก้า อันมีชื่อรหัสว่า AZD1222[7] มีตราสินค้าต่าง ๆ รวมทั้ง Covishield[16] และ Vaxzevria[3][17] เป็นวัคซีนป้องกันโควิด-19 ที่ใช้ไวรัสเป็นเวกเตอร์หรือเป็นพาหะ และฉีดเข้าในกล้ามเนื้อเพื่อป้องกันโรคโควิด-19 มหาวิทยาลัยออกซฟอร์ดและบริษัทแอสตร้าเซนเนก้าได้พัฒนาขึ้นโดยใช้อะดีโนไวรัสของชิมแปนซีที่ได้ดัดแปลงพันธุกรรมชื่อว่า ChAdOx1[18][19][20][21] งานศึกษาที่ทำในปี 2020 พบประสิทธิศักย์ของวัคซีนที่ร้อยละ 76 ในการป้องกันโรคที่แสดงอาการเริ่มตั้งแต่วันที่ 22 หลังจากฉีดโดสแรกและร้อยละ 81.3 หลังจากฉีดโดสที่สอง[22] ส่วนงานวิเคราะห์ในปี 2021 พบว่า สำหรับการติดเชื้อที่แสดงอาการ หลังจากได้โดสที่สอง วัคซีนมีประสิทธิภาพร้อยละ 66 ต่อสายพันธุ์อัลฟา (อังกฤษ) และร้อยละ 60 ต่อสายพันธุ์เดลตา (อินเดีย)[23]\n\nวัคซีนปลอดภัยดี มีผลข้างเคียงเป็นความเจ็บปวดที่จุดฉีด ปวดหัว คลื่นไส้ ทั้งหมดปกติจะหายไปเองภายใน 2-3 วัน[24] ที่เกิดน้อยกว่ารวมการแพ้วัคซีนอย่างรุนแรงคือแอนาฟิแล็กซิส (อังกฤษมีรายงาน 268 กรณีจากการฉีดวัคซีน 21.2 ล้านโดสจนถึงวันที่ 14 เมย. 2021)[24] ในกรณีที่มีน้อยมาก (น้อยกว่า 1 ในแสนคน) วัคซีนสัมพันธ์กับการเกิดลิ่มเลือดบวกกับเกล็ดเลือดที่ลดลงต่ำ[25][26] สำนักงานการแพทย์ยุโรป (European Medicines Agency, EMA) ระบุว่า จนถึงวันที่ 4 เมย. 2021 มีกรณีเกิดลิ่มเลือด 222 กรณีภายในเขตเศรษฐกิจยุโรปและสหราชอาณาจักรจากคน 34 ล้านคนที่ได้ฉีดวัคซีน[27]\n\nในวันที่ 30 ธันวาคม 2020 สหราชอาณาจักรเป็นประเทศแรกที่ได้อนุมัติให้ใช้วัคซีน[15][28][29] โดยฉีดวัคซีนนอกการทดลองเป็นเข็มแรกในวันที่ 4 มกราคม 2021[30] หลังจากนั้น องค์กรต่าง ๆ ทั่วโลกจึงได้อนุมัติให้ใช้วัคซีนรวมทั้งสำนักงานการแพทย์ยุโรป (EMA)[3][14] องค์กรควบคุมของออสเตรเลีย (TGA)[1] และองค์การอนามัยโลก[31] จนถึงวันที่ 27 เมษายน 2021 วัคซีนนี้ได้รับอนุญาตให้ใช้ในประเทศ 137 ประเทศ รวมทั้งประเทศไทย ประเทศบางประเทศได้จำกัดให้ใช้วัคซีนเฉพาะในคนสูงอายุเท่านั้น เพราะผลไม่พึงประสงค์ของวัคซีนที่อาจมีในคนอายุน้อยกว่าแม้จะเกิดน้อยมาก"

    },
    {
        "title":"Sinovac Vaccine ...>>",
        "subtitle":"วัคซีนซิโนแวค (Sinovac) เป็น Inactivated vaccines หรือวัคซีนชนิดเชื้อตายที่ผลิตโดยซิโนแวก ไบโอเทค (Sinovac Biotech) บริษัทเวชภัณฑ์สัญชาติจีน ",
        "image_url":"https://raw.githubusercontent.com/Chiangkung/BasicAPI/main/sinovac.jpg",
        "detail":"โคโรนาแว็ก (อังกฤษ: CoronaVac) หรือวัคซีนโควิด-19 ของซิโนแว็ก (อังกฤษ: Sinovac COVID-19 vaccine)[1] เป็นวัคซีนไวรัสโควิด-19 ชนิดเชื้อตายที่บริษัทยาจีนคือซิโนแว็กไบโอเทค (เรียกสั้น ๆ ว่า ซิโนแว็ก) เป็นผู้พัฒนาขึ้น[2] การทดลองทางคลินิกระยะที่ 3 ได้ทำในประเทศบราซิล[3] ชิลี[4] อินโดนีเซีย[5] ฟิลิปปินส์[6] และตุรกี[7] เป็นวัคซีนที่ใช้เทคโนโลยีที่มีอยู่เดิมแล้วเหมือนกับวัคซีนโควิด-19 เชื้อตายอื่น ๆ รวมทั้งวัคซีนของซิโนฟาร์มและโคแว็กซินของบริษัทภารัตไบโอเทค[8] วัคซีนไม่ต้องแช่แข็ง คือทั้งวัคซีนและวัตถุดิบของวัคซีนสามารถส่งโดยแช่เย็นที่อุณหภูมิระหว่าง 2-8 องศาเซลเซียสซึ่งเป็นอุณหภูมิเดียวกับที่ใช้เก็บวัคซีนไข้หวัดใหญ่[9]\n\nผลการศึกษาจริงกับชาวชิลีเกินกว่า 10 ล้านรายที่ได้รับโคโรนาแว็กที่ตีพิมพ์ในวารสารการแพทย์นิวอิงแลนด์ (NEJM) พบว่าวัคซีนมีประสิทธิภาพระงับการติดเชื้อแบบแสดงอาการในอัตราร้อยละ 66, ลดการเข้าโรงพยาบาล ร้อยละ 88, และลดการเสียชีวิตได้ร้อยละ 86[10] ในเดือนพฤษภาคม ค.ศ. 2021 ผลการศึกษาจริงกับบุคลากรทางแพทย์เกิน 128,000 คนในอินโดนีเซียพบว่า วัคซีนป้องกันการติดเชื้อที่แสดงอาการร้อยละ 94 ป้องกันการติดเชื้อที่ต้องเข้า รพ. ได้ร้อยละ 96 และป้องกันการเสียชีวิตได้ร้อยละ 98[11][12] ในต้นเดือนมิถุนายน ค.ศ. 2021 ผลเบื้องต้นของการศึกษาจริงกับประชากรร้อยละ 75 (จากประมาณ 46,000 คน) ผู้ได้รับวัคซีนนี้ในเมืองเซอร์ฮานา (Serrana) รัฐเซาเปาลู บราซิล แสดงว่า อัตราการติดเชื้อแบบแสดงอาการลดลงร้อยละ 80 การเข้าโรงพยาบาล ลดลงร้อยละ 86 และการเสียชีวิตลดลงร้อยละ 95[13][14]\n\nในเดือนเมษายน ค.ศ. 2021 ผลการทดลองระยะที่ 3 จากบราซิลแสดงประสิทธิศักย์ป้องกันการติดเชื้อแบบแสดงอาการที่ร้อยละ 50.7 และป้องกันจากการติดเชื้อที่มีอาการเบาแต่ต้องรักษาที่ร้อยละ 83.7 การป้องกันการติดเชื้อแบบแสดงอาการเพิ่มขึ้นถึงร้อยละ 62.3 ถ้าฉีดโดสที่สอง 21 วันหรือยิ่งกว่าหลังจากโดสแรก[15] ในเดือนมีนาคม ค.ศ. 2021 ผลการทดลองระยะที่ 3 สุดท้ายจากตุรกีแสดงประสิทธิศักย์ที่ร้อยละ 83.5[16]\n\nวัคซีนกำลังใช้ในโปรแกรมฉีดวัคซีนให้ประชาชนทั่วโลกรวมทั้งประเทศในเอเชีย[17][18][19] อเมริกาใต้[20][21][22] อเมริกาเหนือ[23][24][25] และยุโรป[26][27] จนถึงเดือนเมษายน ค.ศ. 2021 บริษัทมีสมรรถภาพการผลิตวัคซีนถึง 2,000 ล้านโดสต่อปี[28] และได้จัดส่งวัคซีนแล้ว 600 ล้านโดสทั่วโลก[29] วัคซีนปัจจุบันผลิตในประเทศจีน[28] แต่มีแผนจะผลิตในบราซิล (กันยายน 2021)[30] อียิปต์[31] และฮังการี[32]\n\nในวันที่ 1 มิถุนายน ค.ศ. 2021 องค์การอนามัยโลกได้อนุมัติโคโรนาแว็กให้อยู่ในรายการให้ใช้เป็นการฉุกเฉิน[29][33][34] ซึ่งในเวลานั้น มีคนได้ฉีดวัคซีนนี้แล้วเกิน 430 ล้านโดสทั่วโลก"

    }

]

def Home(request):
    return JsonResponse(data=data,safe=False,json_dumps_params={'ensure_ascii': False})